module.exports = {
    name: "hiddenlink",
    description: "Envoie un lien masqué derrière un gros bloc de spoiler",
    run: async (client, message, args) => {
        setTimeout(() => message.delete().catch(() => {}), 3000);

        if (args.length < 2) {
            return message.channel.send("𖤐 Usage : \n+hiddenlink <url> <message>")
                .then(msg => setTimeout(() => msg.delete().catch(() => {}), 12000));
        }

        const url = args[0];
        const text = args.slice(1).join(" ");

        const hiddenBlock = "||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||||​||";

        const finalMessage = `${text}${hiddenBlock}${url}`;

        message.channel.send(finalMessage)
            .then(msg => setTimeout(() => msg.delete().catch(() => {}), 60000));
    }
};
